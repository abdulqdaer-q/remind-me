syntax = "proto3";

package voicechat;

service VoiceChatService {
  // Group voice chat methods
  rpc StreamAzan (StreamAzanRequest) returns (StreamAzanResponse);
  rpc StartVoiceChat (StartVoiceChatRequest) returns (StartVoiceChatResponse);
  rpc StopVoiceChat (StopVoiceChatRequest) returns (StopVoiceChatResponse);

  // 1-on-1 call methods
  rpc StartCall (StartCallRequest) returns (StartCallResponse);
  rpc EndCall (EndCallRequest) returns (EndCallResponse);

  // Health check
  rpc HealthCheck (HealthCheckRequest) returns (HealthCheckResponse);
}

message StreamAzanRequest {
  int64 chat_id = 1;
  string audio_url = 2;
}

message StreamAzanResponse {
  bool success = 1;
  string message = 2;
}

message StartVoiceChatRequest {
  int64 chat_id = 1;
}

message StartVoiceChatResponse {
  bool success = 1;
  string message = 2;
}

message StopVoiceChatRequest {
  int64 chat_id = 1;
}

message StopVoiceChatResponse {
  bool success = 1;
  string message = 2;
}

message StartCallRequest {
  int64 user_id = 1;
  string audio_url = 2;  // Audio to play during call (e.g., azan or reminder)
  int32 duration_seconds = 3;  // Max call duration
}

message StartCallResponse {
  bool success = 1;
  string message = 2;
  string call_id = 3;  // Unique call identifier
}

message EndCallRequest {
  string call_id = 1;
}

message EndCallResponse {
  bool success = 1;
  string message = 2;
}

message HealthCheckRequest {}

message HealthCheckResponse {
  bool healthy = 1;
}
